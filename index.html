<script>
    // Initialisation de la carte
    var map = L.map('map').setView([0, 0], 2);

    // Couche de fond OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Charger le fichier GeoJSON corrigé
    fetch('cleaned_earthquakes.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                pointToLayer: function (feature, latlng) {
                    // Utilisation de la magnitude pour ajuster la taille des marqueurs
                    return L.circleMarker(latlng, {
                        radius: feature.properties.magnitude * 2, // Taille basée sur la magnitude
                        fillColor: "red",
                        color: "#000",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.8
                    });
                },
                onEachFeature: function (feature, layer) {
                    // Ajouter des popups pour chaque point avec les détails
                    layer.bindPopup(
                        "<b>Date :</b> " + feature.properties.timestamp + "<br>" +
                        "<b>Magnitude :</b> " + feature.properties.magnitude + "<br>" +
                        "<b>Profondeur :</b> " + feature.properties.depth + " km"
                    );
                }
            }).addTo(map);
        })
        .catch(error => console.error("Erreur lors du chargement du GeoJSON :", error));
</script>
